<!DOCTYPE html>
<html lang="es" data-theme="sorbet">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tienda JONZKO — Moda Urbana Premium</title>

  <!-- SEO -->
  <meta name="description" content="Compra moda urbana premium en JONZKO: polos, poleras, pantalones y accesorios. Envíos a todo el Perú.">
  <link rel="canonical" href="https://TU_DOMINIO/tienda.html">
  <meta property="og:title" content="Tienda JONZKO — Moda Urbana Premium">
  <meta property="og:description" content="Polos, poleras, joggers y más. Envíos a todo el Perú.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://TU_DOMINIO/og.jpg">
  <meta property="og:url" content="https://TU_DOMINIO/tienda.html">
  <meta name="theme-color" content="#ff7b7b"/>

  <!-- Fonts + Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    /* ===== Temas (igual que index) ===== */
    :root{--r:14px; --shadow:0 12px 30px rgba(0,0,0,.12); --line:rgba(0,0,0,.08); --blur:16px}
    html[data-theme="sorbet"]{--bg1:#fff7f4;--bg2:#fff1f1;--ink:#1a1c1f;--muted:#6b7280;--a1:#ff7b7b;--a2:#ffb86b;--a3:#ffd6e7;--card:#fff;--ok:#2bb673;--err:#d84343}
    html[data-theme="ocean"]{--bg1:#edf9fb;--bg2:#eaf5ff;--ink:#0d1b2a;--muted:#566;--a1:#00bcd4;--a2:#66e0b6;--a3:#bee3f8;--card:#fff;--ok:#1a8f64;--err:#c0392b}
    html[data-theme="royal"]{--bg1:#f7f5ff;--bg2:#fdf7ff;--ink:#1a152b;--muted:#6d6a7c;--a1:#9b5de5;--a2:#f15bb5;--a3:#fee440;--card:#fff;--ok:#2aa46b;--err:#d33f56}

    *{box-sizing:border-box}
    body{
      margin:0; color:var(--ink); font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:radial-gradient(1000px 600px at 120% -20%, color-mix(in oklab, var(--a2) 18%, transparent), transparent 40%),
                 radial-gradient(900px 500px at -10% -10%, color-mix(in oklab, var(--a1) 14%, transparent), transparent 45%),
                 linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    img{max-width:100%; display:block}

    .progress{position:fixed; top:0; left:0; height:3px; width:0%; z-index:60;
      background:linear-gradient(90deg,var(--a1),var(--a2),var(--a3)); box-shadow:0 0 12px color-mix(in oklab, var(--a2) 50%, transparent);
      transition:width .1s linear}

    .topbar{background:linear-gradient(90deg, color-mix(in oklab, var(--a1) 35%, white), color-mix(in oklab, var(--a2) 35%, white));
      color:#111; text-align:center; font-weight:900; letter-spacing:.3px; padding:8px 12px; border-bottom:1px solid rgba(0,0,0,.06)}

    header{position:sticky; top:0; z-index:50; backdrop-filter:blur(var(--blur)) saturate(140%);
      background:color-mix(in oklab, white 76%, var(--a3) 6%); border-bottom:1px solid rgba(0,0,0,.06)}
    .nav{max-width:1200px; margin:0 auto; padding:12px 18px; display:flex; align-items:center; gap:16px}
    .brand{display:flex; align-items:center; gap:12px}
    .brand img{width:42px;height:42px;border-radius:10px;object-fit:cover; box-shadow:0 0 0 2px #fff, 0 0 0 3px color-mix(in oklab, var(--a1) 30%, transparent)}
    .brand .name{font-weight:900; letter-spacing:.4px}
    nav a{text-decoration:none; color:#0e0f11; font-weight:900; margin-left:22px; position:relative}
    nav a.active::after{content:""; position:absolute; left:0; right:0; bottom:-8px; height:3px; background:linear-gradient(90deg,var(--a1), var(--a2)); border-radius:999px; box-shadow:0 2px 10px color-mix(in oklab, var(--a2) 45%, transparent)}
    .menu{display:none;background:none;border:0;font-size:1.5rem}
    @media(max-width:860px){
      nav{display:none; position:absolute; top:64px; left:16px; right:16px; background:color-mix(in oklab, white 86%, var(--a3) 8%); backdrop-filter:blur(20px); border:1px solid rgba(0,0,0,.06); border-radius:16px; padding:14px}
      nav.show{display:block; animation:fade .18s ease} .menu{display:block}
    }
    @keyframes fade{from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:none}}

    .theme{display:flex; gap:8px; align-items:center; background:rgba(255,255,255,.8); border:1px solid rgba(0,0,0,.06); border-radius:999px; padding:6px 8px}
    .sw{width:26px;height:26px;border-radius:999px;border:1px solid rgba(0,0,0,.1); cursor:pointer}
    .sw.sorbet{background:conic-gradient(from 0deg, #ff7b7b, #ffb86b, #ffd6e7, #ff7b7b)}
    .sw.ocean{background:conic-gradient(from 0deg, #00bcd4, #66e0b6, #bee3f8, #00bcd4)}
    .sw.royal{background:conic-gradient(from 0deg, #9b5de5, #f15bb5, #fee440, #9b5de5)}

    .wrap{max-width:1200px; margin:0 auto; padding:22px 18px}

    /* HERO */
    .hero{position:relative; height:58vh; min-height:360px; display:grid; place-items:center; text-align:center; color:#fff; overflow:hidden; border-radius:18px; margin:12px 18px; box-shadow:var(--shadow)}
    .hero video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover}
    .hero::after{content:""; position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.55))}
    .hero .content{position:relative; z-index:2; padding:0 16px}
    .hero h1{margin:0 0 8px; font-size:clamp(1.8rem,3.2vw,2.4rem); font-weight:900}
    .hero p{opacity:.95}

    /* Breadcrumbs */
    .crumbs{max-width:1200px; margin:6px auto 0; padding:0 18px; font-size:.9rem; color:var(--muted)}
    .crumbs a{color:#374151; text-decoration:none}
    .crumbs a:hover{text-decoration:underline}

    /* Filters */
    .filters{max-width:1200px; margin:12px auto 18px; padding:0 18px}
    .panel{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:12px; display:flex; gap:10px; flex-wrap:wrap; box-shadow:var(--shadow)}
    .panel input,.panel select{padding:10px; border:1px solid var(--line); border-radius:10px; background:#fff}
    .panel .range{display:flex; gap:8px; align-items:center}
    .chip{padding:8px 10px; border-radius:999px; border:1px solid var(--line); background:#fff; cursor:pointer; font-weight:900; font-size:.9rem}
    .chip.active{background:linear-gradient(180deg,#fff,color-mix(in oklab, var(--a3) 32%, #fff)); border-color:color-mix(in oklab, var(--a1) 40%, #eaeaea)}

    /* Grid */
    main{max-width:1200px; margin:0 auto; padding:0 18px 36px}
    .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:16px}
    @media (max-width:1024px){ .grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:720px){ .grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:480px){ .grid{grid-template-columns:1fr}}

    .card{position:relative; background:var(--card); border:1px solid var(--line); border-radius:16px; overflow:hidden; box-shadow:0 8px 22px rgba(0,0,0,.08); transition:transform .18s ease}
    .card:hover{transform:translateY(-4px)}
    .thumb{width:100%; height:220px; object-fit:cover}
    .body{padding:12px}
    .title{font-weight:900; margin:0 0 4px; font-size:1rem}
    .muted{color:var(--muted); font-size:.92rem}
    .row{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:8px}
    .price{font-weight:900} .old{color:#9aa0a6; text-decoration:line-through; font-weight:600; margin-left:6px}
    .badge{position:absolute; left:10px; top:10px; background:#111; color:#fff; font-size:.78rem; padding:4px 8px; border-radius:999px; box-shadow:0 6px 14px rgba(0,0,0,.12)}
    .badge.offer{background:linear-gradient(90deg,#ff7b7b,#ffb86b)}
    .badge.new{background:linear-gradient(90deg,#34d399,#10b981)}
    .opts{display:flex; align-items:center; gap:8px; margin-top:8px; flex-wrap:wrap}
    .color{width:18px; height:18px; border-radius:50%; border:1px solid #ddd}
    .size{padding:6px 8px; border:1px solid var(--line); border-radius:8px; font-size:.85rem; cursor:default}
    .qty{display:flex; align-items:center; gap:6px}
    .qty input{width:52px; padding:6px; border:1px solid var(--line); border-radius:8px; text-align:center}
    .add{border:0; border-radius:10px; padding:10px 12px; font-weight:900; cursor:pointer; background:linear-gradient(90deg, var(--a1), var(--a2)); color:#111}
    .quick{background:#fff; border:1px solid var(--line); padding:8px 10px; border-radius:10px; font-weight:900; cursor:pointer}

    /* Cart */
    .cart{position:fixed; top:0; right:-100%; width:100%; max-width:400px; height:100%; background:#fff; box-shadow:-6px 0 22px rgba(0,0,0,.18); transition:right .25s ease; z-index:80; display:flex; flex-direction:column}
    .cart.show{right:0}
    .cart-header{display:flex; align-items:center; justify-content:space-between; padding:14px; background:linear-gradient(90deg,var(--a1),var(--a2)); color:#111; font-weight:900}
    .cart-list{flex:1; overflow:auto; padding:12px}
    .citem{display:grid; grid-template-columns:60px 1fr auto; gap:10px; align-items:center; padding:10px; border:1px solid var(--line); border-radius:10px; margin-bottom:10px}
    .citem img{width:60px; height:60px; object-fit:cover; border-radius:8px}
    .cname{font-weight:900}
    .caux{font-size:.85rem; color:var(--muted)}
    .cqty{display:flex; align-items:center; gap:6px}
    .cqty input{width:56px; padding:6px; border:1px solid var(--line); border-radius:8px; text-align:center}
    .cprice{font-weight:900; text-align:right}
    .cart-footer{border-top:1px solid var(--line); padding:12px}
    .row2{display:flex; justify-content:space-between; align-items:center; margin:6px 0}
    .btn{width:100%; padding:12px; border:0; border-radius:10px; font-weight:900; cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--a1),var(--a2)); color:#111}
    .btn.danger{background:#d62828; color:#fff}
    .btn-link{background:#fff; border:1px solid var(--line)}

    /* Modal (Quick View) */
    .modal{position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; place-items:center; z-index:85; padding:16px}
    .modal.show{display:grid}
    .modal-card{max-width:920px; width:100%; background:#fff; border-radius:16px; overflow:hidden; display:grid; grid-template-columns:1fr 1fr}
    @media(max-width:820px){ .modal-card{grid-template-columns:1fr} }
    .m-media{background:#111; display:grid; place-items:center}
    .m-media img, .m-media video{width:100%; height:100%; object-fit:cover; max-height:520px}
    .m-body{padding:16px}
    .m-title{font-size:1.2rem; font-weight:900}
    .m-cat{color:var(--muted)}
    .m-opts{display:flex; gap:10px; flex-wrap:wrap; margin:10px 0}
    .swatch{width:22px; height:22px; border-radius:50%; border:1px solid #ddd; cursor:pointer}
    .sz{padding:6px 10px; border:1px solid var(--line); border-radius:999px; cursor:pointer; font-weight:900}
    .sz.active, .swatch.active{outline:3px solid color-mix(in oklab, var(--a1) 40%, #fff)}
    .m-actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:10px}
    .m-qty{display:flex; align-items:center; gap:6px}
    .m-qty input{width:64px; padding:8px; border:1px solid var(--line); border-radius:10px; text-align:center}

    /* Toast + Footer + WA */
    .toast{position:fixed; left:50%; bottom:16px; transform:translateX(-50%) translateY(16px); opacity:0; pointer-events:none; background:#fff; border:1px solid var(--line); border-radius:10px; padding:10px 14px; box-shadow:var(--shadow); z-index:90; display:flex; align-items:center; gap:8px}
    .toast.show{opacity:1; transform:translateX(-50%)}
    footer{border-top:1px solid var(--line); background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.9)); text-align:center; padding:26px 18px}
    .f-links{display:flex; gap:20px; justify-content:center; flex-wrap:wrap; margin-bottom:10px}
    .f-links a{position:relative; text-decoration:none; font-weight:900; color:#0e0f11}
    .social{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:10px}
    .soc{width:42px; height:42px; display:grid; place-items:center; border-radius:999px; background:#fff; border:1px solid rgba(0,0,0,.08)}
    .soc img{width:26px; height:26px; object-fit:contain}
    .wa{position:fixed; right:16px; bottom:16px; z-index:70; width:56px; height:56px; display:grid; place-items:center; border-radius:999px; background:#fff; border:1px solid rgba(0,0,0,.08); box-shadow:0 12px 28px rgba(0,0,0,.12); animation:wa-pulse 3s ease-in-out infinite}
    @keyframes wa-pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  </style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <div class="topbar">🎉 Nueva colección disponible ahora en <strong>JONZKO</strong></div>

  <!-- HEADER -->
  <header>
    <div class="nav">
      <div class="brand">
        <a href="index.html"><img src="img/logo.jpg" alt="JONZKO"></a>
        <div class="name">JONZKO</div>
      </div>

      <!-- Themes -->
      <div class="theme" aria-label="Tema">
        <button class="sw sorbet" title="Sorbet" data-set-theme="sorbet"></button>
        <button class="sw ocean"  title="Ocean"  data-set-theme="ocean"></button>
        <button class="sw royal"  title="Royal"  data-set-theme="royal"></button>
      </div>

      <button class="menu" id="menuBtn" aria-label="Abrir menú"><i class="fa-solid fa-bars"></i></button>
      <nav id="navBar">
        <a href="index.html">Inicio</a>
        <a href="tienda.html" class="active">Tienda</a>
        <a href="nosotros.html">Nosotros</a>
        <a href="contacto.html">Contacto</a>
      </nav>

      <div class="actions">
        <div class="search">
          <input id="q" type="search" placeholder="Buscar…">
          <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
        </div>
        <button id="openCart" class="add" aria-label="Carrito"><i class="fa-solid fa-bag-shopping"></i> <span id="cartCount">0</span></button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-label="Hero tienda">
    <video autoplay muted loop playsinline poster="img/slide1.jpg">
      <source src="img/conocenos.mp4" type="video/mp4">
    </video>
    <div class="content">
      <h1>Tienda JONZKO</h1>
      <p>Moda urbana premium — categorías, tallas y lanzamientos</p>
    </div>
  </section>

  <!-- BREADCRUMBS -->
  <nav class="crumbs" aria-label="Migas">
    <a href="index.html">Inicio</a> › <strong>Tienda</strong>
  </nav>

  <!-- FILTERS -->
  <div class="filters">
    <div class="panel" role="group" aria-label="Filtros">
      <input id="f_text" type="search" placeholder="Buscar producto…">
      <select id="f_cat" title="Categoría">
        <option value="all">Todas las categorías</option>
        <option>Polos</option><option>Poleras</option><option>Pantalones</option><option>Accesorios</option>
      </select>
      <div class="range" title="Precio (S/)">
        <span>S/</span><input id="f_min" type="number" min="0" step="1" placeholder="mín">
        <span>—</span><input id="f_max" type="number" min="0" step="1" placeholder="máx">
      </div>
      <select id="f_size" title="Talla">
        <option value="all">Todas las tallas</option>
        <option>XS</option><option>S</option><option>M</option><option>L</option><option>XL</option>
      </select>
      <select id="f_sort" title="Orden">
        <option value="default">Ordenar</option>
        <option value="asc">Menor precio</option>
        <option value="desc">Mayor precio</option>
        <option value="new">Novedades</option>
      </select>
      <button id="f_clear" class="chip">Limpiar</button>
    </div>
  </div>

  <!-- GRID -->
  <main>
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <!-- CART -->
  <aside id="cart" class="cart" aria-label="Carrito">
    <div class="cart-header">
      <strong>🛍️ Tu carrito</strong>
      <button id="closeCart" class="btn-link" style="padding:6px 10px; border-radius:8px" aria-label="Cerrar carrito"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div id="cartList" class="cart-list"></div>
    <div class="cart-footer">
      <div class="row2"><span>Subtotal</span><strong>S/ <span id="subTotal">0.00</span></strong></div>
      <div class="row2"><span>Envío (est.)</span><span id="ship">S/ 0.00</span></div>
      <div class="row2" style="border-top:1px solid var(--line); padding-top:8px"><span>Total</span><strong>S/ <span id="grandTotal">0.00</span></strong></div>
      <button id="goWsp" class="btn primary" style="margin-top:8px"><i class="fa-brands fa-whatsapp"></i> Finalizar por WhatsApp</button>
      <button id="clearCart" class="btn danger" style="margin-top:8px">Vaciar</button>
    </div>
  </aside>

  <!-- MODAL QUICK VIEW -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="modal-card tilt">
      <div class="m-media">
        <img id="mImg" src="" alt="" loading="lazy" decoding="async">
      </div>
      <div class="m-body">
        <div class="m-title" id="mTitle"></div>
        <div class="m-cat" id="mCat"></div>
        <div style="margin-top:8px"><strong id="mPrice">S/ 0.00</strong> <span id="mOld" class="old"></span></div>

        <h4 style="margin:12px 0 6px">Color</h4>
        <div id="mColors" class="m-opts"></div>

        <h4 style="margin:12px 0 6px">Talla</h4>
        <div id="mSizes" class="m-opts"></div>

        <div class="m-actions">
          <div class="m-qty">
            <label for="mQty" class="m-cat">Cant.</label>
            <input id="mQty" type="number" min="1" value="1">
          </div>
          <button id="mAdd" class="btn primary" style="width:auto"><i class="fa-solid fa-cart-plus"></i> Añadir</button>
          <button id="mClose" class="btn-link" style="width:auto">Cerrar</button>
        </div>

        <!-- JSON-LD Product dinámico -->
        <script id="ld-product" type="application/ld+json">{}</script>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"><i class="fa-solid fa-circle-check" style="color:#22c55e"></i><span>Agregado</span></div>

  <!-- FOOTER -->
  <footer>
    <div class="f-links">
      <a href="terminos.html">📜 Términos</a>
      <a href="privacidad.html">🔒 Privacidad</a>
      <a href="reclamaciones.html">📖 Reclamos</a>
    </div>
    <div class="social">
      <a class="soc" href="https://www.instagram.com/" target="_blank" rel="noopener" aria-label="Instagram">
        <img src="img/instagram.jpg" alt="Instagram" width="28" height="28" loading="lazy" decoding="async">
      </a>
      <a class="soc" href="https://www.facebook.com/profile.php?id=61563952841904" target="_blank" rel="noopener" aria-label="Facebook">
        <img src="img/facebook.jpg" alt="Facebook" width="28" height="28" loading="lazy" decoding="async">
      </a>
      <a class="soc" href="https://www.tiktok.com/@jonzko1?lang=es" target="_blank" rel="noopener" aria-label="TikTok">
        <img src="img/tiktok.png" alt="TikTok" width="28" height="28" loading="lazy" decoding="async">
      </a>
      <a class="soc" href="mailto:ventas@jonzko.com" aria-label="Correo">
        <img src="img/gmail.jpeg" alt="Correo" width="28" height="28" loading="lazy" decoding="async">
      </a>
      <a class="soc" href="https://wa.me/51998989599" target="_blank" rel="noopener" aria-label="WhatsApp">
        <img src="img/phone.png" alt="WhatsApp" width="28" height="28" loading="lazy" decoding="async">
      </a>
    </div>
    <p class="muted" style="margin-top:10px">© 2025 <strong>JONZKO</strong>. Todos los derechos reservados.</p>
  </footer>

  <!-- WhatsApp flotante -->
  <a class="wa" href="https://wa.me/51998989599?text=Hola%20JONZKO%2C%20tengo%20una%20consulta%20sobre%20[producto]" target="_blank" rel="noopener" aria-label="WhatsApp">
    <img src="img/whassapp.png" alt="" aria-hidden="true" width="28" height="28" decoding="async">
  </a>

  <!-- JSON-LD breadcrumbs -->
  <script id="ld-breadcrumb" type="application/ld+json">{
    "@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
      {"@type":"ListItem","position":1,"name":"Inicio","item":"https://TU_DOMINIO/"},
      {"@type":"ListItem","position":2,"name":"Tienda","item":"https://TU_DOMINIO/tienda.html"}
    ]}</script>

  <script>
    /* ===== Progreso scroll ===== */
    const progress=document.getElementById('progress');
    const onScroll=()=>{const h=document.documentElement; const sc=h.scrollTop/(h.scrollHeight-h.clientHeight)*100; progress.style.width=sc+'%';};
    document.addEventListener('scroll', onScroll, {passive:true}); onScroll();

    /* ===== Theme persistente ===== */
    const html=document.documentElement;
    const saved=localStorage.getItem('jonzko-theme'); if(saved) html.setAttribute('data-theme', saved);
    document.querySelectorAll('[data-set-theme]').forEach(b=>{
      b.addEventListener('click',()=>{ html.setAttribute('data-theme', b.dataset.setTheme); localStorage.setItem('jonzko-theme', b.dataset.setTheme); });
    });

    /* ===== Menú ===== */
    const menuBtn=document.getElementById('menuBtn');
    const navBar=document.getElementById('navBar');
    menuBtn?.addEventListener('click',()=> navBar.classList.toggle('show'));

    /* ===== Toast ===== */
    const toastEl=document.getElementById('toast');
    function toast(msg,ok=true){
      toastEl.querySelector('span').textContent=msg;
      toastEl.firstElementChild.style.color= ok ? '#22c55e' : '#d62828';
      toastEl.classList.add('show'); setTimeout(()=>toastEl.classList.remove('show'),1600);
    }

    /* ===== Catálogo (puedes editar/añadir) ===== */
    const CATALOGO=[
      {id:'p1', nombre:'Polera Negra Oversize', categoria:'Poleras', precio:129, precioOld:149, colores:['#111','#6b7280'], tallas:['S','M','L','XL'], img:'img/slide1.jpg', nuevo:true},
      {id:'p2', nombre:'Polo Básico Blanco', categoria:'Polos', precio:59, colores:['#ffffff'], tallas:['S','M','L'], img:'img/polos_basico.jpg', oferta:true},
      {id:'p3', nombre:'Polo Premium', categoria:'Polos', precio:99, colores:['#111','#a78bfa','#e11d48'], tallas:['M','L','XL'], img:'img/Polo_premium.jpg', nuevo:true},
      {id:'p4', nombre:'Jogger Tech Olive', categoria:'Pantalones', precio:139, colores:['#556b2f'], tallas:['S','M','L','XL'], img:'img/slide2.jpg'},
      {id:'p5', nombre:'Gorra Minimal Logo', categoria:'Accesorios', precio:69, colores:['#111','#6b7280'], tallas:['Única'], img:'img/slide3.jpg'},
      {id:'p6', nombre:'Hoodie Arena', categoria:'Poleras', precio:149, precioOld:169, colores:['#d6ccc2'], tallas:['S','M','L','XL'], img:'img/slide2.jpg', oferta:true},
      {id:'p7', nombre:'Polo Gráfico Noir', categoria:'Polos', precio:89, colores:['#111'], tallas:['S','M','L','XL'], img:'img/slide3.jpg'},
      {id:'p8', nombre:'Cargo Street Kaki', categoria:'Pantalones', precio:159, colores:['#6b705c'], tallas:['S','M','L'], img:'img/slide1.jpg', nuevo:true},
    ];

    /* ===== STATE ===== */
    const state={
      q:'', cat:'all', min:'', max:'', size:'all', sort:'default',
      cart: JSON.parse(localStorage.getItem('cart')||'[]'),
      modal: null
    };

    /* ===== HELPERS ===== */
    const S=(n)=>'S/ '+Number(n).toFixed(2);
    const el=(sel,ctx=document)=>ctx.querySelector(sel);
    const els=(sel,ctx=document)=>[...ctx.querySelectorAll(sel)];
    const grid=el('#grid');

    /* ===== RENDER GRID ===== */
    function cardTemplate(p){
      const badge = p.oferta ? '<span class="badge offer">Oferta</span>' : (p.nuevo?'<span class="badge new">Nuevo</span>':'');
      const old = p.precioOld ? `<span class="old">${S(p.precioOld)}</span>` : '';
      const colors = (p.colores||[]).map(c=>`<span class="color" style="background:${c}"></span>`).join('');
      const sizes = (p.tallas||[]).map(t=>`<span class="size">${t}</span>`).join('');
      return `
        ${badge}
        <img class="thumb" src="${p.img}" alt="${p.nombre}" loading="lazy" decoding="async">
        <div class="body">
          <h3 class="title">${p.nombre}</h3>
          <div class="muted">${p.categoria}</div>
          <div class="opts">${colors}</div>
          <div class="opts">${sizes}</div>
          <div class="row">
            <div><span class="price">${S(p.precio)}</span>${old}</div>
            <div class="qty">
              <label class="muted" for="q_${p.id}" style="font-size:.8rem">Cant.</label>
              <input id="q_${p.id}" type="number" value="1" min="1" max="20"/>
              <button class="add" data-id="${p.id}"><i class="fa-solid fa-plus"></i> Añadir</button>
              <button class="quick" data-qv="${p.id}" title="Vista rápida"><i class="fa-regular fa-eye"></i></button>
            </div>
          </div>
        </div>`;
    }
    function renderGrid(list){
      grid.innerHTML='';
      list.forEach(p=>{
        const card=document.createElement('article');
        card.className='card tilt';
        card.innerHTML=cardTemplate(p);
        grid.appendChild(card);
      });
    }

    /* ===== FILTERS ===== */
    const $f_text=el('#f_text'), $f_cat=el('#f_cat'), $f_min=el('#f_min'), $f_max=el('#f_max'), $f_size=el('#f_size'), $f_sort=el('#f_sort'), $clear=el('#f_clear');
    const $q=el('#q');

    function applyFilters(){
      let list=CATALOGO.slice();
      const qtxt=(state.q||'').trim().toLowerCase();
      if(qtxt) list=list.filter(p=> p.nombre.toLowerCase().includes(qtxt) || p.categoria.toLowerCase().includes(qtxt));
      if(state.cat!=='all') list=list.filter(p=>p.categoria===state.cat);
      if(state.size!=='all') list=list.filter(p=>(p.tallas||[]).includes(state.size));
      if(state.min!=='') list=list.filter(p=>p.precio>=Number(state.min));
      if(state.max!=='') list=list.filter(p=>p.precio<=Number(state.max));
      if(state.sort==='asc') list.sort((a,b)=>a.precio-b.precio);
      if(state.sort==='desc') list.sort((a,b)=>b.precio-a.precio);
      if(state.sort==='new') list.sort((a,b)=>(b.nuevo?1:0)-(a.nuevo?1:0));
      renderGrid(list);
    }
    [$f_text,$q].forEach(inp=> inp.addEventListener('input', e=>{ state.q=e.target.value; applyFilters(); }));
    $f_cat.addEventListener('change',e=>{ state.cat=e.target.value; applyFilters(); });
    $f_size.addEventListener('change',e=>{ state.size=e.target.value; applyFilters(); });
    $f_min.addEventListener('input',e=>{ state.min=e.target.value; applyFilters(); });
    $f_max.addEventListener('input',e=>{ state.max=e.target.value; applyFilters(); });
    $f_sort.addEventListener('change',e=>{ state.sort=e.target.value; applyFilters(); });
    $clear.addEventListener('click',()=>{
      state.q=''; state.cat='all'; state.size='all'; state.min=''; state.max=''; state.sort='default';
      $f_text.value=''; $q.value=''; $f_cat.value='all'; $f_size.value='all'; $f_min.value=''; $f_max.value=''; $f_sort.value='default';
      applyFilters();
    });

    /* ===== Carrito ===== */
    const $cart=el('#cart'), $openCart=el('#openCart'), $closeCart=el('#closeCart');
    const $cartList=el('#cartList'), $subTotal=el('#subTotal'), $ship=el('#ship'), $grand=el('#grandTotal'), $count=el('#cartCount');
    el('#clearCart').addEventListener('click', ()=>{ state.cart=[]; renderCart(); });
    $openCart.addEventListener('click',()=> $cart.classList.add('show'));
    $closeCart.addEventListener('click',()=> $cart.classList.remove('show'));

    function saveCart(){ localStorage.setItem('cart', JSON.stringify(state.cart)); }
    function cartCount(){ return state.cart.reduce((a,b)=>a+b.cant,0); }
    function subTotal(){ return state.cart.reduce((a,b)=>a + b.precio * b.cant, 0); }
    function shippingEstimate(total){ return total>=250 ? 0 : 12; } // Envío gratis desde S/ 250

    function renderCart(){
      $cartList.innerHTML='';
      if(state.cart.length===0){ $cartList.innerHTML='<p class="caux">✨ Aún no tienes productos en tu carrito</p>'; }
      state.cart.forEach((it,idx)=>{
        const row=document.createElement('div');
        row.className='citem';
        row.innerHTML=`
          <img src="${it.img}" alt="${it.nombre}">
          <div>
            <div class="cname">${it.nombre}</div>
            <div class="caux">S/ ${it.precio.toFixed(2)} • Talla: ${it.talla||'-'} • Color: ${it.color||'-'}</div>
            <div class="cqty">
              <label for="c_${idx}" class="caux">Cant.</label>
              <input id="c_${idx}" type="number" min="1" max="50" value="${it.cant}">
              <button class="btn-link" data-del="${idx}" style="padding:6px 10px; border-radius:8px"><i class="fa-solid fa-trash"></i></button>
            </div>
          </div>
          <div class="cprice">${S(it.precio*it.cant)}</div>`;
        $cartList.appendChild(row);
      });
      const st=subTotal(), sh=shippingEstimate(st), gt=st+sh;
      $subTotal.textContent=st.toFixed(2);
      $ship.textContent='S/ '+sh.toFixed(2);
      $grand.textContent=gt.toFixed(2);
      $count.textContent=cartCount();
      saveCart();
    }
    $cartList.addEventListener('input', (e)=>{
      const id=e.target.id||''; if(!id.startsWith('c_')) return;
      const idx=Number(id.split('_')[1]); const v=Math.max(1, Math.min(50, Number(e.target.value||1)));
      state.cart[idx].cant=v; renderCart();
    });
    $cartList.addEventListener('click',(e)=>{
      const del=e.target.closest('[data-del]'); if(!del) return;
      const idx=Number(del.dataset.del); state.cart.splice(idx,1); renderCart();
    });

    // Agregar desde grid
    grid.addEventListener('click',(e)=>{
      const btn=e.target.closest('.add'); if(!btn) return;
      const id=btn.dataset.id; const p=CATALOGO.find(x=>x.id===id);
      const qtyEl=el('#q_'+id);
      const cant=Math.max(1, Math.min(50, Number(qtyEl?.value||1)));
      const talla=(p.tallas||[])[0]||''; const color=(p.colores||[])[0]||'';
      const existing=state.cart.find(x=>x.id===id && x.talla===talla && x.color===color);
      if(existing) existing.cant+=cant; else state.cart.push({id:p.id, nombre:p.nombre, precio:p.precio, img:p.img, talla, color, cant});
      renderCart(); toast('Agregado al carrito ✅', true);
    });

    /* ===== Quick View (modal) ===== */
    const $modal=el('#modal'), $mImg=el('#mImg'), $mTitle=el('#mTitle'), $mCat=el('#mCat'), $mPrice=el('#mPrice'), $mOld=el('#mOld'),
          $mColors=el('#mColors'), $mSizes=el('#mSizes'), $mQty=el('#mQty'), $mAdd=el('#mAdd');

    grid.addEventListener('click',(e)=>{
      const qv=e.target.closest('[data-qv]'); if(!qv) return;
      const id=qv.dataset.qv; const p=CATALOGO.find(x=>x.id===id); openModal(p);
    });
    el('#mClose').addEventListener('click',()=> $modal.classList.remove('show'));
    $modal.addEventListener('click',(e)=>{ if(e.target===$modal) $modal.classList.remove('show'); });

    function openModal(p){
      state.modal={...p, color:(p.colores||[])[0]||'', talla:(p.tallas||[])[0]||'', cant:1};
      $mImg.src=p.img; $mImg.alt=p.nombre; $mTitle.textContent=p.nombre; $mCat.textContent=p.categoria;
      $mPrice.textContent=S(p.precio); $mOld.textContent=p.precioOld?S(p.precioOld):''; $mQty.value=1;
      $mColors.innerHTML=(p.colores||[]).map((c,i)=>`<button class="swatch ${i===0?'active':''}" data-color="${c}" style="background:${c}" aria-label="Color ${c}"></button>`).join('');
      $mSizes.innerHTML=(p.tallas||[]).map((t,i)=>`<button class="sz ${i===0?'active':''}" data-size="${t}">${t}</button>`).join('');
      // JSON-LD product
      const ld={ "@context":"https://schema.org","@type":"Product","name":p.nombre,"image":[location.origin+'/'+p.img],"description":p.categoria,"brand":{"@type":"Brand","name":"JONZKO"},"offers":{"@type":"Offer","priceCurrency":"PEN","price":p.precio,"availability":"https://schema.org/InStock"} };
      el('#ld-product').textContent=JSON.stringify(ld);
      $modal.classList.add('show');
    }
    $mColors.addEventListener('click',(e)=>{
      const b=e.target.closest('.swatch'); if(!b) return;
      els('.swatch',$mColors).forEach(x=>x.classList.remove('active')); b.classList.add('active'); state.modal.color=b.dataset.color;
    });
    $mSizes.addEventListener('click',(e)=>{
      const b=e.target.closest('.sz'); if(!b) return;
      els('.sz',$mSizes).forEach(x=>x.classList.remove('active')); b.classList.add('active'); state.modal.talla=b.dataset.size;
    });
    $mQty.addEventListener('input',()=>{ state.modal.cant=Math.max(1,Math.min(50, Number($mQty.value||1))); });
    $mAdd.addEventListener('click',()=>{
      const p=state.modal; const existing=state.cart.find(x=>x.id===p.id && x.talla===p.talla && x.color===p.color);
      if(existing) existing.cant+=p.cant; else state.cart.push({id:p.id, nombre:p.nombre, precio:p.precio, img:p.img, talla:p.talla, color:p.color, cant:p.cant});
      renderCart(); toast('Agregado ✅', true); $modal.classList.remove('show');
    });

    /* ===== Checkout WhatsApp ===== */
    el('#goWsp').addEventListener('click',()=>{
      if(state.cart.length===0){ toast('Tu carrito está vacío', false); return; }
      const lines=state.cart.map(it=>`• ${it.nombre} (${it.talla||'-'}, ${it.color||'-'}) x${it.cant} — ${S(it.precio*it.cant)}`);
      const msg=[
        'Hola JONZKO, quiero finalizar mi compra:',
        ...lines,
        `Subtotal: ${S(state.cart.reduce((a,b)=>a+b.precio*b.cant,0))}`,
        `Envío (estimado): ${el('#ship').textContent}`,
        `Total: ${S(parseFloat(el('#grandTotal').textContent))}`,
        '',
        'Nombre:', 'Distrito/Ciudad:', 'Referencia:'
      ].join('\n');
      window.open(`https://wa.me/51998989599?text=${encodeURIComponent(msg)}`,'_blank');
    });

    /* ===== Buscador header sync ===== */
    $q.addEventListener('input', e=>{ el('#f_text').value=e.target.value; state.q=e.target.value; applyFilters(); });

    /* ===== Tilt 3D ===== */
    document.addEventListener('mousemove', e=>{
      document.querySelectorAll('.tilt').forEach(card=>{
        const r=card.getBoundingClientRect(); if(!r.width || !r.height) return;
        const x=e.clientX-r.left, y=e.clientY-r.top;
        const rx=((y/r.height)-0.5)*-6, ry=((x/r.width)-0.5)*6;
        card.style.transform=`perspective(1000px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(6px)`;
      });
    });
    document.addEventListener('mouseleave', ()=> document.querySelectorAll('.tilt').forEach(c=>c.style.transform=''));

    /* ===== Init ===== */
    function renderAll(){ renderGrid(CATALOGO); renderCart(); applyFilters(); }
    renderAll();
  </script>
</body>
</html>


